ğŸ”¹ quantite_restante : câ€™est quoi exactement ?

ğŸ‘‰ quantite_restante appartient Ã  ProduitLine (le lot dâ€™achat)
ğŸ‘‰ Ce nâ€™est PAS le stock du vendeur
ğŸ‘‰ Câ€™est le stock physique global restant du lot, tous vendeurs confondus

En une phrase

quantite_restante = ce quâ€™il reste rÃ©ellement dans le lot aprÃ¨s toutes les sorties (ventes, transferts, annulations)

ğŸ”¹ OÃ¹ se situe chaque quantitÃ© (rappel)
1ï¸âƒ£ ProduitLine (lot dâ€™achat)
Achat â†’ Lot â†’ ProduitLine

Champ	Sens
quantite	QuantitÃ© achetÃ©e initialement
quantite_restante	QuantitÃ© encore disponible dans ce lot

ğŸ‘‰ Global, partagÃ© entre tous les vendeurs / bijouteries

2ï¸âƒ£ VendorStock (rÃ©servation vendeur)
ProduitLine â†’ VendorStock â†’ Vendor

Champ	Sens
quantite_allouee	QuantitÃ© rÃ©servÃ©e au vendeur
quantite_vendue	QuantitÃ© dÃ©jÃ  sortie (livrÃ©e)
quantite_disponible (calcul)	quantite_allouee - quantite_vendue

ğŸ‘‰ SpÃ©cifique Ã  un vendeur

ğŸ”¹ Exemple concret (trÃ¨s parlant)
Achat
Lot L1 â€“ Produit "Bague Or"
QuantitÃ© achetÃ©e = 20
quantite_restante = 20

Allocation vendeurs
Vendeur A â†’ allouÃ©e = 8
Vendeur B â†’ allouÃ©e = 6


â¡ï¸ quantite_restante est toujours 20 (pas encore vendu)

Livraison (vente rÃ©elle)
Vendeur A livre 3 bagues


VendorStock A :

quantite_allouee = 8

quantite_vendue = 3

quantite_disponible = 5

ProduitLine :

quantite_restante = 17 âœ…

Nouvelle livraison (vendeur B)
Vendeur B livre 2 bagues


ProduitLine.quantite_restante = 15

ğŸ”¹ Pourquoi afficher quantite_restante au vendeur ?
âœ”ï¸ Avantages

Transparence : â€œle stock global arrive Ã  sa finâ€

Alerte : Ã©viter de sur-allouer Ã  dâ€™autres vendeurs

ContrÃ´le manager/admin

âš ï¸ Attention

Le vendeur ne peut pas vendre au-delÃ  de sa quantite_disponible, mÃªme si quantite_restante est Ã©levÃ©e.

ğŸ”¹ RÃ©sumÃ© ultra-clair
Champ	Niveau	Sert Ã 
quantite_restante	Lot global	Stock physique rÃ©el
quantite_allouee	Vendeur	RÃ©servation
quantite_vendue	Vendeur	DÃ©jÃ  livrÃ©
quantite_disponible	Calcul	Ce que le vendeur peut encore livrer